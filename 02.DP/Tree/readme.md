# 树形DP

一个节点表示一个阶段，节点的所有分支表示这个阶段下做出的决策

一般来说问题的解在根的位置获得

## 没有上司的舞会

某大学有N个职员，编号为1~N。他们之间有从属关系，也就是说他们的关系就像一棵以校长为根的树，父结点就是子结点的直接上司。现在有个周年庆宴会，宴会每邀请来一个职员都会增加一定的快乐指数Ri，但是呢，如果某个职员的**直接上司**来参加舞会了，那么这个职员就无论如何也不肯来参加舞会了。所以，请你编程计算，邀请哪些职员可以使快乐指数最大，求最大的快乐指数。

一个节点表示一个员工，也就是DP的阶段

`f(i, 0 | 1)`表示`i`节点的最优解，0表示`i`不来，1表示来

因此，可得转移方程

$$
\begin{aligned}
f(i, 0) & = \sum_{x \in \text{sub}(i)} \max \{f(x, 0), f(x, 1)\}\\
f(i, 1) & =  \sum_{x \in \text{sub}(i)} f(x, 0) + R_i \\
\end{aligned}
$$

解释：

如果员工`i`不来，则其直接下属可以来也可以不来，选择最大的一个。

如果员工`i`来，则该节点贡献自身的快乐指数，与其直接下属全部不来时的快乐指数之和。
